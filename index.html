<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mimosa Compost ‚Äî Demo</title>
  <style>
    :root{
      --bg:#070B12; --card:#0B1220; --card2:#0E1830; --line:#1b2a4a;
      --text:#e9f1ff; --muted:#9fb2d5; --accent:#3b82f6; --ok:#22c55e; --bad:#ef4444;
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 20% 0%, rgba(59,130,246,.20), transparent 60%),
        radial-gradient(900px 500px at 80% 0%, rgba(34,197,94,.12), transparent 55%),
        radial-gradient(700px 500px at 50% 100%, rgba(99,102,241,.10), transparent 60%),
        var(--bg);
      min-height:100vh;
    }
    .wrap{max-width:1100px;margin:0 auto;padding:28px 18px 60px}
    .top{
      display:flex;align-items:center;gap:10px;
      padding:14px 18px;border:1px solid var(--line);
      border-radius:999px;background:rgba(11,18,32,.75);
      backdrop-filter: blur(10px);
      width:fit-content;
    }
    .dot{width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 18px rgba(59,130,246,.8)}
    h1{font-size:44px;line-height:1.08;margin:22px 0 10px}
    p{margin:0;color:var(--muted);font-size:16px;line-height:1.6}
    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:18px;margin-top:22px}
    @media (max-width:900px){ .grid{grid-template-columns:1fr} h1{font-size:34px} }
    .card{
      border:1px solid var(--line);
      background:rgba(11,18,32,.80);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:0 20px 60px rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
    }
    .card h2{margin:0 0 10px;font-size:18px}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .btn{
      appearance:none;border:1px solid rgba(255,255,255,.10);
      background:rgba(59,130,246,.95);
      color:white; font-weight:700;
      padding:12px 14px;border-radius:14px;
      cursor:pointer; text-decoration:none;
      display:inline-flex;align-items:center;gap:10px;
      transition: transform .08s ease, filter .12s ease;
    }
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}
    .btn.ghost{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.12);color:var(--text)}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:999px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      color:var(--muted);
      font-size:13px;
    }
    .status{display:flex;align-items:center;gap:10px;margin-top:12px}
    .badge{
      padding:6px 10px;border-radius:999px;font-size:12px;font-weight:700;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
    }
    .badge.ok{color:var(--ok);border-color:rgba(34,197,94,.35);background:rgba(34,197,94,.08)}
    .badge.bad{color:var(--bad);border-color:rgba(239,68,68,.35);background:rgba(239,68,68,.08)}
    code{background:rgba(255,255,255,.06);padding:3px 6px;border-radius:8px;border:1px solid rgba(255,255,255,.08)}
    .small{font-size:13px;color:var(--muted)}
    .qr{
      display:flex;gap:14px;align-items:flex-start;flex-wrap:wrap;margin-top:12px
    }
    img{border-radius:14px;border:1px solid rgba(255,255,255,.12)}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top"><span class="dot"></span><strong>Mimosa Compost</strong><span class="small">¬∑ Demo Dashboard</span></div>

    <h1>Gi√°m s√°t ·ªß ph√¢n & c√¢y tr·ªìng<br/>tr√™n web th·ªùi gian th·ª±c</h1>
    <p>
      Landing page cho ban gi√°m kh·∫£o: b·∫•m 1 n√∫t ƒë·ªÉ v√†o dashboard live (Cloudflare Tunnel).
      Link live ƒë∆∞·ª£c ƒë·ªçc t·ª± ƒë·ªông t·ª´ <code class="mono">live.json</code>.
    </p>

    <div class="grid">
      <div class="card">
        <h2>Truy c·∫≠p nhanh</h2>
        <div class="status">
          <span class="badge" id="badge">ƒêang t·∫£i‚Ä¶</span>
          <span class="small">Dashboard URL: <span class="mono" id="liveText">‚Äî</span></span>
        </div>

        <div class="row">
          <button class="btn" id="goBtn">üöÄ Truy c·∫≠p Dashboard</button>
          <button class="btn ghost" id="copyBtn">üìã Copy link</button>
          <a class="btn ghost" id="openJson" target="_blank" rel="noopener">üßæ M·ªü live.json</a>
        </div>

        <div style="margin-top:14px" class="small">
          M·ªói l·∫ßn b·∫°n ch·∫°y tunnel ra link m·ªõi ‚Üí ch·ªâ c·∫ßn s·ª≠a <code class="mono">live.json</code> v√† Commit.
          Gi√°m kh·∫£o v·∫´n v√†o 1 link GitHub Pages duy nh·∫•t.
        </div>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,.08);margin:16px 0">

        <h2>Checklist demo (g·ª£i √Ω)</h2>
        <div class="pill">‚úÖ Sensor ‚Üí g·ª≠i v·ªÅ server (ingest)</div>
        <div class="pill">‚úÖ Dashboard hi·ªÉn th·ªã temp / humidity / soil</div>
        <div class="pill">‚úÖ Alerts & g·ª£i √Ω x·ª≠ l√Ω</div>
        <div class="pill">‚úÖ Leaf measurement + chatbot</div>
      </div>

      <div class="card">
        <h2>QR cho gi√°m kh·∫£o</h2>
        <p class="small">
          Qu√©t QR ƒë·ªÉ v√†o landing GitHub Pages c·ªßa b·∫°n (kh√¥ng ƒë·ªïi).
        </p>

        <div class="qr">
          <img id="qrImg" width="220" height="220" alt="QR GitHub Pages">
          <div>
            <div class="small">Link landing:</div>
            <div class="mono" id="pagesUrl" style="word-break:break-all;margin-top:6px"></div>
            <div class="row" style="margin-top:10px">
              <button class="btn ghost" id="copyPagesBtn">üìã Copy landing</button>
            </div>

            <div style="margin-top:12px" class="small">
              Tip: In QR n√†y l√™n poster/slide. Gi√°m kh·∫£o qu√©t ‚Üí b·∫•m ‚ÄúTruy c·∫≠p Dashboard‚Äù.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  const LIVE_JSON = "./live.json";
  let LIVE_URL = "";

  function setStatus(ok, text){
    const b = document.getElementById("badge");
    b.textContent = text;
    b.classList.remove("ok","bad");
    b.classList.add(ok ? "ok":"bad");
  }

  async function loadLive(){
    try{
      // cache-bust ƒë·ªÉ lu√¥n l·∫•y b·∫£n m·ªõi
      const r = await fetch(LIVE_JSON + "?ts=" + Date.now(), {cache:"no-store"});
      if(!r.ok) throw new Error("HTTP " + r.status);
      const j = await r.json();
      if(!j.live || typeof j.live !== "string") throw new Error("live.json thi·∫øu field live");
      LIVE_URL = j.live.trim();
      document.getElementById("liveText").textContent = LIVE_URL;
      setStatus(true, "S·∫µn s√†ng");
      document.getElementById("openJson").href = LIVE_JSON;
    }catch(e){
      LIVE_URL = "";
      document.getElementById("liveText").textContent = "Kh√¥ng ƒë·ªçc ƒë∆∞·ª£c live.json";
      setStatus(false, "L·ªói");
      document.getElementById("openJson").href = LIVE_JSON;
      console.error(e);
    }
  }

  function openLive(){
    if(!LIVE_URL){
      alert("Ch∆∞a c√≥ LIVE URL. H√£y ki·ªÉm tra live.json (field live).");
      return;
    }
    window.open(LIVE_URL, "_blank");
  }

  async function copy(text){
    try{
      await navigator.clipboard.writeText(text);
      alert("ƒê√£ copy!");
    }catch(e){
      prompt("Copy th·ªß c√¥ng:", text);
    }
  }

  // QR cho landing pages URL hi·ªán t·∫°i
  function setupPagesQR(){
    const pages = window.location.href.replace(/#.*$/,"");
    document.getElementById("pagesUrl").textContent = pages;
    const qr = "https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=" + encodeURIComponent(pages);
    document.getElementById("qrImg").src = qr;
    document.getElementById("copyPagesBtn").onclick = ()=>copy(pages);
  }

  document.getElementById("goBtn").onclick = openLive;
  document.getElementById("copyBtn").onclick = ()=> {
    if(!LIVE_URL) return alert("Ch∆∞a c√≥ LIVE URL ƒë·ªÉ copy.");
    copy(LIVE_URL);
  };

  setupPagesQR();
  loadLive();
</script>
</body>
</html>
